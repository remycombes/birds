<div class="container" id="container">
  <!------------------------------- MENU ----------------------------------->
  <ng-container *ngIf="page=='menu'">
    <div class="menu">
      <img class="background" [src]="'assets/photos/acanthisFlammea.jpg'" alt="">
      <div (click)="page='quizz'">
        <span>QUIZZ</span>
      </div>
      <div (click)="page='library'">
        <span>ESPECES</span>
      </div>
    </div>
  </ng-container>

  <!------------------------------- LIBRARY ----------------------------------->
  <ng-container *ngIf="page=='library'">
    <div class="library-header">ESPECES</div>  
    <!-- <svg >
      <path fill="none" stroke="black" d="M 2 2 8 8" />
    </svg> -->

    <!-- <svg class="library" [attr.viewBox]="viewBox">      
      <image 
        *ngFor="let bird of library.birds | keyvalue" 
        preserveAspectRatio="xMidYMid slice" 
        [attr.x]="library.positions[bird.key].x" 
        [attr.y]="library.positions[bird.key].y"
        width="0.9" 
        height="0.9" 
        [attr.xlink:href]="'assets/miniature/tn_' + library.birds[bird.key].img"
      />
    </svg> -->
    <div class="library">
      <ng-container *ngFor="let order of library.phylo | keyvalue">
        <div class="order">{{order.key}}</div>
        <ng-container *ngFor="let family of library.phylo[order.key] | keyvalue">
          <div class="family">{{family.key}}</div>
          <ng-container *ngFor="let species of library.phylo[order.key][family.key] | keyvalue">
            <div class="species">              
              <div class="photo">
                <img [src]="'assets/miniature/tn_'+species.value.img" alt="">

              </div>
              <div class="name">
                {{species.value.name}} <br>
                <span class="latin">{{species.value.genus}} {{species.value.species}}</span> 
              </div>
              
            </div>
          </ng-container>
        </ng-container>
      </ng-container>
    </div>
    
    <svg class="full-screen" xmlns="http://www.w3.org/2000/svg" fill="red" stroke="black" viewBox="0 0 10 10" (click)="fullScreen?closeFullScreen():openFullScreen()">
      <path  d="M 0 0 L 10 10 "/>
      <path  d="M 0 10 L 10 0 "/>
      <path  d="M 0 2 L 0 0 L 2 0"/>
      <path  d="M 8 0 L 10 0 L 10 2"/>
      <path  d="M 10 8 L 10 10 L 8 10"/>
      <path  d="M 0 8 L 0 10 L 2 10"/>      
    </svg>  
    <svg class="go-to-menu" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="black" viewBox="0 0 10 10" (click)="page='menu'">
      <path  d="M 0 3.5 L 5 0.5 L 10 3.5 L 10 10 L 0 10 Z "/>
    </svg>  
  </ng-container>
  
  <!------------------------------- QUIZZ ----------------------------------->
  <ng-container *ngIf="page=='quizz'">
    <svg class="full-screen" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="white" viewBox="0 0 10 10" (click)="fullScreen?closeFullScreen():openFullScreen()">
      <path  d="M 0 0 L 10 10 "/>
      <path  d="M 0 10 L 10 0 "/>
      <path  d="M 0 2 L 0 0 L 2 0"/>
      <path  d="M 8 0 L 10 0 L 10 2"/>
      <path  d="M 10 8 L 10 10 L 8 10"/>
      <path  d="M 0 8 L 0 10 L 2 10"/>      
    </svg>  
    <svg class="go-to-menu" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="white" viewBox="0 0 10 10" (click)="page='menu'">
      <path  d="M 0 3.5 L 5 0.5 L 10 3.5 L 10 10 L 0 10 Z "/>
    </svg>  
      
    <div *ngIf="quizz.current && quizz.mode=='question'" class="quizz">
      <img class="background" [src]="'assets/photos/'+quizz.birds[quizz.current].img" alt="">
      <div class="picture">
        <img class="photo" [src]="'assets/photos/'+quizz.birds[quizz.current].img" alt="">
      </div>
      <div class="answers" *ngIf="quizz.mode=='question'">
        <div class="answer" *ngFor="let answer of quizz.answers" (click)="giveAnswer(answer)" >
          <div>{{quizz.birds[answer].name}}</div>
        </div>
      </div>
    </div>
  
    <div class="correct" *ngIf="quizz.mode=='answer' && quizz.givenAnswer == quizz.current" (click)="nextQuestion()">
      <img class="background" [src]="'assets/photos/'+quizz.birds[quizz.current].img+'.jpg'" alt="">

      <div class="result">{{quizz.birds[quizz.current].name}}</div>
      <div class="bird">
        <img class="photo" [src]="'assets/photos/'+quizz.birds[quizz.current].img">
        <div class="key2">
          {{quizz.birds[quizz.current].order}} {{quizz.birds[quizz.current].family}} {{quizz.birds[quizz.current].genus}} {{quizz.birds[quizz.current].species}}
        </div>          
      </div>
      <div class="actions">
        <div class="next">
          <svg class="svg-arrow-right" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="black" viewBox="0 0 10 10"><path  d="M 2 0 L 8 5 L 2 10 "/></svg>
        </div>
      </div>
    </div>
    <div class="wrong" *ngIf="quizz.mode=='answer' && (quizz.givenAnswer != quizz.current)" (click)="nextQuestion()">
      <img class="background" [src]="'assets/photos/'+quizz.birds[quizz.current].img" alt="">
      <div class="result">FAUX</div>
  
      <div class="birds">
        <figure class="photo">
          <img [src]="'assets/photos/'+quizz.birds[quizz.current].img">
          <figcaption>{{quizz.birds[quizz.current].name}}</figcaption> 
        </figure>
        <figure class="photo">
          <img [src]="'assets/photos/'+quizz.birds[quizz.givenAnswer].img">
          <figcaption>{{quizz.birds[quizz.givenAnswer].name}}</figcaption> 
        </figure>
      </div>
      <div class="actions">
        <div class="next">
          <svg class="svg-arrow-right" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="black" viewBox="0 0 10 10"><path  d="M 2 0 L 8 5 L 2 10 "/></svg>
        </div>
      </div>
    </div>

  </ng-container>
  
  
</div>
